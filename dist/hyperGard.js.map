{"version":3,"file":"hyperGard.js","sources":["lib/extend.js","src/common.js","src/helpers.js","src/action.js","src/hyperGard.js"],"sourcesContent":["/**\n * Copyright 2018 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or   implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar typeObj = {};\nvar slice = [].slice;\nvar toString = typeObj.toString;\n\nvar getType = function(mixed) {\n  if (mixed == null) {\n    return mixed + '';\n  }\n\n  return typeof mixed === 'object' || typeof mixed === 'function' ?\n            typeObj[toString.call(mixed)] || 'object' : typeof mixed;\n};\n\nvar isSpecificValue = function(val) {\n  return getType(val) === 'buffer' || getType(val) === 'date' || getType(val) === 'regexp';\n};\n\nvar cloneSpecificValue = function(val) {\n  var valType = getType(val);\n  var x;\n\n  if (valType === 'buffer') {\n    x = new Buffer(val.length);\n    val.copy(x);\n    return x;\n  }\n\n  if (valType === 'date') {\n    return new Date(val.getTime());\n  }\n\n  if (valType === 'regexp') {\n    return new RegExp(val);\n  }\n\n  throw new Error('Unexpected situation');\n};\n\n/**\n * Recursive cloning array.\n */\nvar deepCloneArray = function(arr) {\n  var clone = [];\n\n  arr.forEach(function(item, index) {\n    if (getType(item) === 'object') {\n      if (Array.isArray(item)) {\n        clone[index] = deepCloneArray(item);\n      } else if (isSpecificValue(item)) {\n        clone[index] = cloneSpecificValue(item);\n      } else {\n        clone[index] = deepExtend({}, item);\n      }\n    } else {\n      clone[index] = item;\n    }\n  });\n\n  return clone;\n};\n\n/**\n * Extening object that entered in first argument.\n *\n * Returns extended object or false if have no target object or incorrect type.\n *\n * If you wish to clone source object (without modify it), just use empty new\n * object as first argument, like this:\n *   deepExtend({}, yourObj_1, [yourObj_N]);\n */\nvar deepExtend = function(/*obj_1, [obj_2], [obj_N]*/) {\n  if (arguments.length < 1 || getType(arguments[0]) !== 'object') {\n    return false;\n  }\n\n  if (arguments.length < 2) {\n    return arguments[0];\n  }\n\n  var target = arguments[0];\n  var args = slice.call(arguments, 1);\n  var val, src;\n\n  args.forEach(function(obj) {\n    // skip argument if it is array or isn't object\n    if (getType(obj) !== 'object' || Array.isArray(obj)) {\n      return;\n    }\n\n    Object.keys(obj).forEach(function(key) {\n      src = target[key]; // source value\n      val = obj[key]; // new value\n\n      // recursion prevention\n      if (val !== target) {\n        if (getType(val) !== 'object' || val === null) {\n          target[key] = val;\n        } else if (Array.isArray(val)) {\n          // just clone arrays (and recursive clone objects inside)\n          target[key] = deepCloneArray(val);\n        } else if (isSpecificValue(val)) {\n          // custom cloning and overwrite for specific objects\n          target[key] = cloneSpecificValue(val);\n        } else if (getType(src) !== 'object' || src === null || Array.isArray(src)) {\n          // overwrite by new value if source isn't object or array\n          target[key] = deepExtend({}, val);\n        } else {\n          // source value and new value is objects both, extending...\n          target[key] = deepExtend(src, val);\n        }\n      }\n    });\n  });\n\n  return target;\n};\n\n['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'].forEach(function(name) {\n  typeObj[\"[object \" + name + \"]\"] = name.toLowerCase();\n});\n\nexport default deepExtend;\n\n","// TODO: Dynamically pull from package.json\nexport var version = '4.0.0';\n\nexport var defaultOptions = {\n  preloadHomepage: true,\n  cacheHomepage: false,\n  debug: false,\n\n  xhr: {\n    headers: {\n      Accept: 'application/hal+json, application/json, */*; q=0.01',\n      'X-HyperGard': version\n    }\n  }\n};\n\n/**\n * Regex for HTTP Methods with no Body\n */\nexport var excludeBody = /^(head|get)$/i;\n/**\n * Regex for `hypermedia` reserved properties\n */\nexport var excludedProps = /^(_embedded|_links|_forms)$/;\n","import deepExtend from '../lib/extend';\nimport { defaultOptions } from './common';\n\nfunction load(url, fetchOptions) {\n  var o = deepExtend({}, defaultOptions.xhr, fetchOptions);\n\n  return Promise.race([\n    xhrTimeout(fetchOptions.timeout || 60000),\n    fetch(url, o)\n  ]).then(xhrStatus);\n}\n\nexport function isObject(value) {\n  return !!value && {}.toString.call(value) === '[object Object]';\n}\n\nexport function xhrStatus(response) {\n  return (response.status >= 200 && response.status < 300) ? response :\n    Promise.reject(response instanceof Response ? response : new Response('', {\n      status: 503,\n      statusText: 'Possible CORS error'\n    }));\n}\n\nexport function xhrTimeout(timeout) {\n  return new Promise(function (res, rej) {\n    setTimeout(function () {\n      rej({\n        error: {\n          code: '0011',\n          msg: 'Fetch timeout',\n          timeout: timeout\n        }\n      });\n    }, timeout);\n  });\n}\n\nexport var loadNetworkResource = load;\n\nexport function urlSerialize(obj) {\n  return Object.keys(obj).map(function (key) {\n    return encodeURIComponent(key) + '=' + encodeURIComponent(obj[key]);\n  }).join('&');\n}\n\n/**\n * Will wrap any fetch performed in supplied middleware\n * This will allow custom logging headers to be set without\n * using before/after fetch events\n * @param {Function} middleware Function to wrap fetches in\n */\nexport function applyMiddleware(middleware) {\n  loadNetworkResource = (function (stack) {\n    return function (url, fetchOptions) {\n      return middleware(url, fetchOptions, stack);\n    };\n  })(loadNetworkResource);\n}","import { excludeBody } from './common';\nimport { isObject , urlSerialize } from './helpers';\n// import { Resource } from './resource';\n// import deepExtend from '../lib/extend.js';\n\n/**\n * Action instance\n * @param {Object} parent Parent resource\n * @param {String} name Action name\n * @param {Object} action Action object\n * @param {Object} [params] Params to be used for templated action\n * @param {String} type Internal identification of action type\n * @constructor\n */\nexport function Action(parent, name, action, params, type) {\n  var\n    api = this,\n    rawUrl = (action.href || action.action || '').replace(/^#/, ''),\n    method = action.method || (type === 'form' ? 'POST' : 'GET'),\n    actionUrl = '',\n    payLoad = '';\n\n  api.linkRefs,\n\n  /**\n   * Get action name\n   * @returns {String}\n   */\n  api.getActionName = function () {\n    return name;\n  };\n\n  /**\n   * Get action type\n   * @returns {String}\n   */\n  api.getActionType = function () {\n    return type;\n  };\n\n  /**\n   * Get formatted url for the action\n   * @returns {String}\n   */\n  api.getActionUrl = function () {\n    return actionUrl;\n  };\n\n  /**\n   * Get action method\n   * @returns {String}\n   */\n  api.getMethod = function () {\n    return method;\n  };\n\n  /**\n   * Get params that need are required for the action\n   * @returns {Array}\n   */\n  api.getParams = function () {\n    return urltemplate.extractParams(rawUrl);\n  };\n\n  /**\n   * Get un-formatted url for the action\n   * @returns {String}\n   */\n  api.getRawActionUrl = function () {\n    return rawUrl;\n  };\n\n  /**\n   * Get action title\n   * @returns {String}\n   */\n  api.getTitle = function () {\n    return action.title || '';\n  };\n\n  /**\n   * Get action template flag\n   * @returns {Boolean}\n   */\n  api.isTemplated = function () {\n    return action.templated || false;\n  };\n\n  api.setParams = function (params) {\n    actionUrl = action.templated ? urltemplate.expand(rawUrl, params || {}) : rawUrl;\n\n    if (actionUrl) {\n      actionUrl = urlparse.urljoin(action.curie ? action.curie.href : parent.getBase(), actionUrl);\n    }\n\n    if (type === 'form') {\n      if (action.fields && isObject(params)) {\n        payLoad = {};\n        Object.keys(action.fields).forEach(function (field) {\n          if (params.hasOwnProperty(field)) {\n            payLoad[field] = params[field];\n          } else if (action.fields[field].hasOwnProperty('default')) {\n            payLoad[field] = action.fields[field]['default'];\n          }\n        });\n      } else if (params) {\n        payLoad = JSON.stringify(params);\n      }\n\n      if (excludeBody.test(method) && payLoad) {\n        actionUrl = urlparse.urljoin(actionUrl, '?' + urlSerialize(payLoad));\n        payLoad = '';\n      }\n    }\n\n    return api;\n  };\n\n  if (type === 'form') {\n    /**\n     * Get form fields for the form action\n     * @returns {Object}\n     */\n    api.getFields = function () {\n      return action.fields || {};\n    };\n\n    /**\n     * Get payload to be submitted for the form action\n     * @returns {Object}\n     */\n    api.getPayload = function () {\n      return payLoad;\n    };\n  }\n\n  if (action.curie) {\n    /**\n     * Get curie documentation url\n     * @returns {String}\n     */\n    api.getDocUrl = function () {\n      return urltemplate.expand(action.curie.href, {\n        rel: name.split(':')[1]\n      });\n    };\n  }\n\n  api.setParams(params);\n}\n\n// Action.prototype.fetch = function (fetchOptions) {\n//   fetchOptions || (fetchOptions = {});\n\n//   var\n//     url = fetchOptions.url || this.getActionUrl(),\n//     rawUrl = this.getRawActionUrl(),\n//     name = this.getActionName(),\n//     payLoad = this.getPayload ? this.getPayload() : '',\n//     o = deepExtend({\n//       method: this.getMethod(),\n//       action: name,\n//     }, defaultOptions.xhr, fetchOptions),\n\n//     onSuccess = function (response) {\n//       if (response.status === 204) {\n//         return Promise.resolve({\n//           action: name,\n//           data: '',\n//           xhr: response\n//         });\n//       }\n\n//       return response.json().then(function (data) {\n//         return {\n//           action: name,\n//           data: isObject(data) ? new Resource(url, data) : response.text(),\n//           xhr: response\n//         };\n//       }, function () {\n//         return {\n//           action: name,\n//           data: response.text(),\n//           xhr: response\n//         };\n//       });\n//     },\n\n//     onError = function (response) {\n//       return Promise.reject(response instanceof Response ? {\n//         error: {\n//           action: name,\n//           code: '0021',\n//           msg: 'Failed to retrieve action'\n//         },\n//         xhr: response\n//       } : response);\n//     };\n\n//   if (!excludeBody.test(o.method) && isObject(payLoad)) {\n//     o.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n//     o.body = urlSerialize(payLoad);\n//   }\n\n//   if (!url) {\n//     return Promise.reject({\n//       error: {\n//         action: name,\n//         code: '0020',\n//         msg: 'Url is not provided for this action'\n//       }\n//     });\n//   } else if (o.method === 'GET' && !fetchOptions.force && this.linkRefs.hasOwnProperty(rawUrl)) {\n//     return Promise.resolve({\n//       action: name,\n//       data: this.linkRefs[rawUrl]\n//     });\n//   }\n\n//   return loadNetworkResource(url, o).then(onSuccess, onError);\n// };","/**\n * Copyright 2018 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or   implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport deepExtend from '../lib/extend.js';\nimport { Action } from './action';\nimport { defaultOptions, excludeBody, excludedProps, version } from './common';\nimport { applyMiddleware, isObject, loadNetworkResource, urlSerialize } from './helpers';\n\nvar\n\n  concat = [].concat,\n  keys = Object.keys,\n\n  HyperGard = function(endpoint, initOptions) {\n    var\n      homepage,\n      homepageLoaded = false,\n      options = deepExtend({}, defaultOptions, initOptions || {}),\n      linkRefs = {},\n\n      parseCuries = function(curies) {\n        var result = {};\n\n        (curies || []).forEach(function(curie) {\n          if (curie.name) {\n            result[curie.name] = curie;\n          }\n        });\n\n        return result;\n      },\n\n      parseEmbedded = function(res, parent) {\n        var\n          result = {};\n\n        keys(res).forEach(function(key) {\n          result[key] = Array.isArray(res[key]) ? res[key].map(function(item) {\n            return new EmbeddedResource(item, parent);\n          }) : new EmbeddedResource(res[key], parent);\n        });\n\n        return result;\n      },\n\n      sharedResourceAPI = function(obj, res, parent, base) {\n        var\n          props = {},\n          link = ((res._links || {}).self || {}).href || '',\n          actions = [],\n          embedded = parseEmbedded(res._embedded || {}, obj);\n\n        keys(res).forEach(function(key) {\n          if (!excludedProps.test(key)) {\n            this[key] = res[key];\n          }\n        }, props);\n\n        /**\n         * Get Action\n         * @description Allow to follow actions (links, forms) on HAL resources and embedded resources\n         * @param {String} name The name of the action to be taken\n         * @param {Object} params Parameters to populate the action\n         * @returns {Array} List of available actions\n         */\n        obj.getAction = function(name, params) {\n          if (!actions[name]) {\n            actions[name] = [];\n\n            var\n              linkCuries = parseCuries((res._links || {}).curies),\n              formCuries = parseCuries((res._forms || {}).curies),\n              curieName = String(name).split(':')[0] || '';\n\n            concat.call([], (res._links || {})[name]).forEach(function(lnk) {\n              if (lnk) {\n                lnk.curie = linkCuries[curieName];\n                actions[name].push(new Action(this, name, lnk, params, 'link'));\n              }\n            }, this);\n\n            concat.call([], (res._forms || {})[name]).forEach(function(frm) {\n              if (frm) {\n                frm.curie = formCuries[curieName];\n                actions[name].push(new Action(this, name, frm, params, 'form'));\n              }\n            }, this);\n          }\n\n          return actions[name].map(function(action) {\n            return action.setParams(params);\n          });\n        };\n\n        /**\n         * Get base api path\n         * @returns {String}\n         */\n        obj.getBase = function() {\n          return base || parent.getBase();\n        };\n\n        /**\n         * Get embedded object\n         * @param {String} name Name of the embedded object\n         * @returns {Object}\n         */\n        obj.getEmbedded = function(name) {\n          return embedded[name];\n        };\n\n        /**\n         * Fetch embedded\n         * @description Get the object from embedded or follow a link with the same name\n         * @param {String} name Name of the embedded object\n         * @param {Object} [options] to provide to fetch for actions\n         * @returns {Promise}\n         */\n        obj.fetchEmbedded = function(name, options) {\n          return this.hasEmbedded(name) ? Promise.resolve({\n            data: this.getEmbedded(name)\n          }) : this.getFirstAction(name).fetch(options);\n        };\n\n        /**\n         * Get first action from getAction list\n         * @description Convenience method to get the first action instead of using getAction()[0]\n         * @param {String} name The name of the action to be taken\n         * @param {Object} params Parameters to populate the action\n         * @returns {Object} Get Action API\n         */\n        obj.getFirstAction = function(name, params) {\n          return this.getAction(name, params)[0] || new Action(this, name, {}, {}, 'none');\n        };\n\n        /**\n         * Get parent resource object\n         * @returns {Object}\n         */\n        obj.getParent = function() {\n          return parent;\n        };\n\n        /**\n         * Get property value\n         * @returns {*}\n         */\n        obj.getProp = function(prop) {\n          return props[prop];\n        };\n\n        /**\n         * Get all properties as an object\n         * @returns {Object}\n         */\n        obj.getProps = function() {\n          return props;\n        };\n\n        /**\n         * Does an object have a given action?\n         * @description Convenience method to find out if an object has a link or form\n         * @param {String} name The name of the action\n         * @returns {Boolean}\n         */\n        obj.hasAction = function(name) {\n          return obj.hasLink(name) || obj.hasForm(name);\n        };\n\n        /**\n         * Does a resource contain a given embedded obj?\n         * @description Convenience method to find out if a resource contains an embedded object\n         * @param {String} name The name of the embedded obj\n         * @returns {Boolean}\n         */\n        obj.hasEmbedded = function(name) {\n          return !!embedded[name];\n        };\n\n        /**\n         * Does an object have a given form?\n         * @description Convenience method to find out if an object has a form\n         * @param {String} name The name of the form\n         * @returns {Boolean}\n         */\n        obj.hasForm = function(name) {\n          return obj.listActions().forms.indexOf(name) >= 0;\n        };\n\n        /**\n         * Does an object have a given link?\n         * @description Convenience method to find out if an object has a link\n         * @param {String} name The name of the link\n         * @returns {Boolean}\n         */\n        obj.hasLink = function(name) {\n          return obj.listActions().links.indexOf(name) >= 0;\n        };\n\n        /**\n         * List of all available actions\n         * @returns {Object}\n         */\n        obj.listActions = function() {\n          var\n            filter = function(item) {\n              return item !== 'curies';\n            };\n\n          return {\n            links: keys(res._links || {}).filter(filter),\n            forms: keys(res._forms || {}).filter(filter)\n          };\n        };\n\n        /**\n         * List of all available embedded objects\n         * @returns {Array}\n         */\n        obj.listEmbedded = function() {\n          return keys(embedded);\n        };\n\n\n        if (options.debug) {\n          /**\n           * original HAL resource\n           */\n          obj.resource = res;\n        }\n\n        if (!base) {\n          /**\n           * Get root level resource\n           */\n          obj.getRoot = function() {\n            var root;\n\n            do {\n              root =  this.getParent();\n            } while (!(root instanceof Resource));\n\n            return root;\n          };\n        }\n\n        if (link) {\n          linkRefs[link] = obj;\n        }\n      },\n\n      /**\n       * HAL Embedded resource\n       * @param {Resource} res HAL resource\n       * @param {Resource} parent Parent HAL resource\n       * @constructor\n       */\n      EmbeddedResource = function(res, parent) {\n        return sharedResourceAPI(this, res || {}, parent);\n      },\n\n      /**\n       * HAL Resource\n       * @param {String} base Base url for the resource\n       * @param {Object} res Resource data\n       * @constructor\n       */\n      Resource = function(base, res) {\n        return sharedResourceAPI(this, res, this, base);\n      };\n\n    Action.prototype.fetch = function(fetchOptions) {\n      fetchOptions || (fetchOptions = {});\n\n      var\n        url = fetchOptions.url || this.getActionUrl(),\n        rawUrl = this.getRawActionUrl(),\n        name = this.getActionName(),\n        payLoad = this.getPayload ? this.getPayload() : '',\n        o = deepExtend({\n          method: this.getMethod(),\n          action: name,\n        }, options.xhr, fetchOptions),\n\n        onSuccess = function(response) {\n          if (response.status === 204) {\n            return Promise.resolve({\n              action: name,\n              data: '',\n              xhr: response\n            });\n          }\n\n          return response.json().then(function(data) {\n            return {\n              action: name,\n              data: isObject(data) ? new Resource(url, data) : response.text(),\n              xhr: response\n            };\n          }, function() {\n            return {\n              action: name,\n              data: response.text(),\n              xhr: response\n            };\n          });\n        },\n\n        onError = function(response) {\n          return Promise.reject(response instanceof Response ? {\n            error: {\n              action: name,\n              code: '0021',\n              msg: 'Failed to retrieve action'\n            },\n            xhr: response\n          } : response);\n        };\n\n      if (!excludeBody.test(o.method) && isObject(payLoad)) {\n        o.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n        o.body = urlSerialize(payLoad);\n      }\n\n      if (!url) {\n        return Promise.reject({\n          error: {\n            action: name,\n            code: '0020',\n            msg: 'Url is not provided for this action'\n          }\n        });\n      } else if (o.method === 'GET' && !fetchOptions.force && linkRefs.hasOwnProperty(rawUrl)) {\n        return Promise.resolve({\n          action: name,\n          data: linkRefs[rawUrl]\n        });\n      }\n\n      return loadNetworkResource(url, o).then(onSuccess, onError);\n    };\n\n    /**\n     * Fetch\n     * @returns {Promise}\n     */\n    this.fetch = function() {\n      var o = deepExtend({\n        method: 'GET',\n        action: 'homepage',\n      }, options.xhr);\n      var\n        onSuccess = function(response) {\n          if (!options.cacheHomepage) {\n            homepageLoaded = false;\n          }\n\n          return response.json().then(function(data) {\n            return isObject(data) ? {\n              data: new Resource(endpoint, data),\n              xhr: response\n            } : Promise.reject();\n          })['catch'](function() {\n            return Promise.reject({\n              error: {\n                code: '0002',\n                msg: 'Could not parse homepage'\n              },\n              xhr: response\n            });\n          });\n        },\n\n        onError = function(response) {\n          homepageLoaded = false;\n\n          return Promise.reject(response instanceof Response ? {\n            error: {\n              code: '0001',\n              msg: 'Failed to retrieve homepage'\n            },\n            xhr: response\n          } : response);\n        };\n\n      if (!endpoint) {\n        return Promise.reject({\n          error: {\n            code: '0000',\n            msg: 'API endpoint was not provided'\n          }\n        });\n      }\n\n      if (!homepageLoaded) {\n        homepageLoaded = true;\n        homepage = loadNetworkResource(endpoint, o).then(onSuccess, onError);\n      }\n\n      return homepage;\n    };\n\n    /**\n     * Set global options\n     * @param {Object} o Options object\n     * @return {Object} HyperGard\n     */\n    this.setOptions = function(o) {\n      deepExtend(options, o || {});\n      return this;\n    };\n\n    /**\n     * Get global options\n     * @returns {Object}\n     */\n    this.getOptions = function() {\n      return options;\n    };\n\n    /**\n     * Parse json into resource\n     * @param {Object} json Data in json format to be parsed as resource\n     * @returns {Resource}\n     */\n    this.parse = function(json) {\n      return new Resource(endpoint, json || {});\n    };\n\n    /**\n     * Fetch homepage on initialization\n     */\n    if (options.preloadHomepage) {\n      this.fetch();\n    }\n  };\n\nHyperGard.prototype.version = version;\n\n/**\n * Will apply an array of middleware functions around the load method\n * @param {Array} middlewareStack Array of functions to be wrapped around every load\n */\nHyperGard.prototype.applyMiddlewareStack = function(middlewareStack) {\n  var applicationOrder;\n  if (middlewareStack && Array.isArray(middlewareStack) && middlewareStack.length) {\n    // Apply in reverse order, for first entry is applied as inner most wrapper\n    applicationOrder = middlewareStack.reverse();\n    applicationOrder.forEach(applyMiddleware);\n  }\n};\n\n\nexport default HyperGard;\n\n"],"names":[],"mappings":"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"}